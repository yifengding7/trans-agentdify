# 🎬 视频字幕AI处理系统 - GUI使用说明

本文档详细介绍如何使用Web GUI界面进行视频字幕处理。

## 🚀 启动GUI

### 方法1: 使用CLI命令 (推荐)

```bash
# 激活虚拟环境
source .venv/bin/activate  # Linux/Mac
# 或 .venv\Scripts\activate  # Windows

# 启动GUI (默认配置)
video-subtitle gui

# 自定义配置启动
video-subtitle gui --host 0.0.0.0 --port 8080 --share
```

### 方法2: 使用独立启动脚本

```bash
# 激活虚拟环境
source .venv/bin/activate

# 使用独立脚本启动
python launch_gui.py

# 带参数启动
python launch_gui.py --host 0.0.0.0 --port 8080 --share --debug
```

### 启动参数说明

| 参数 | 默认值 | 说明 |
|------|--------|------|
| `--host` | 127.0.0.1 | 服务器地址，使用 0.0.0.0 监听所有网络接口 |
| `--port` | 7860 | 服务器端口 |
| `--share` | False | 启用公网分享 (生成gradio.live链接) |
| `--debug` | False | 启用调试模式 |

## 🖥️ 界面介绍

### 主界面布局

```
┌─────────────────────────────────────────────────────────────┐
│                   🎬 视频字幕AI处理系统                      │
│                基于LangGraph的智能化视频字幕生成系统         │
├──────────────────┬──────────────────────────────────────────┤
│   📁 上传视频    │           📊 处理结果                    │
│                  │                                          │
│ ┌──────────────┐ │ ┌────────────────────────────────────┐   │
│ │              │ │ │         处理报告                   │   │
│ │   文件上传   │ │ │                                    │   │
│ │     区域     │ │ └────────────────────────────────────┘   │
│ │              │ │                                          │
│ └──────────────┘ │ ┌────────────────────────────────────┐   │
│                  │ │       📄 英文字幕                  │   │
│ ⚙️ 处理配置      │ │ ┌────────────────────────────────┐ │   │
│                  │ │ │       📄 中文字幕              │ │   │
│ • 计算设备       │ │ │ ┌────────────────────────────┐ │ │   │
│ • 启用TTS        │ │ │ │       📄 双语字幕          │ │ │   │
│ • 术语处理       │ │ │ └────────────────────────────┘ │ │   │
│ • 最大重试       │ │ └────────────────────────────────┘ │   │
│                  │ └────────────────────────────────────┘   │
│ 🚀 开始处理      │                                          │
└──────────────────┴──────────────────────────────────────────┘
```

### 功能区域详解

#### 1. 文件上传区域

- **支持格式**: MP4, AVI, MOV, MKV, FLV
- **上传方式**: 
  - 点击选择文件
  - 拖拽文件到上传区域
- **文件大小建议**: 不超过100MB

#### 2. 处理配置

- **计算设备**: 
  - `auto`: 自动检测最佳设备
  - `cpu`: 使用CPU进行处理
  - `mps`: 使用Apple Silicon GPU (M1/M2 Mac)
  - `cuda`: 使用NVIDIA GPU (需要CUDA环境)

- **启用文本转语音**: 
  - 开启后会生成中文语音
  - 注意：需要额外的TTS模型支持

- **启用术语处理**: 
  - 对专业术语进行后处理优化
  - 提高翻译质量

- **最大重试次数**: 
  - 处理失败时的重试次数
  - 范围：1-5次

#### 3. 处理结果区域

- **处理报告**: 显示各个处理步骤的状态
- **字幕标签页**:
  - 📄 英文字幕: 原始语音识别结果
  - 📄 中文字幕: 翻译后的中文字幕
  - 📄 双语字幕: 英中对照字幕

## 📝 使用流程

### 基础使用流程

1. **启动系统**
   ```bash
   video-subtitle gui
   ```

2. **上传视频文件**
   - 点击"选择视频文件"按钮
   - 或直接拖拽视频文件到上传区域

3. **配置处理参数**
   - 选择计算设备 (推荐使用 `auto`)
   - 根据需要启用TTS和术语处理
   - 设置合适的重试次数

4. **开始处理**
   - 点击"🚀 开始处理"按钮
   - 系统会显示实时处理进度

5. **查看结果**
   - 处理完成后在右侧查看结果
   - 可以复制字幕内容或下载文件

### 高级使用技巧

#### 1. 批量处理

GUI目前支持单文件处理，批量处理建议使用CLI：

```bash
video-subtitle batch ./videos/ ./outputs/ --recursive
```

#### 2. 自定义配置

对于高级用户，可以修改配置文件或环境变量：

```bash
# 设置环境变量
export SUBTITLE_DEVICE=mps
export SUBTITLE_MAX_RETRIES=5

# 启动GUI
video-subtitle gui
```

#### 3. 调试模式

启用调试模式查看详细日志：

```bash
video-subtitle gui --debug
```

## 🔧 故障排除

### 常见问题

1. **GUI启动失败**
   ```
   错误: ImportError: No module named 'gradio'
   解决: pip install gradio
   ```

2. **视频上传失败**
   - 检查文件格式是否支持
   - 确认文件大小不超过限制
   - 检查文件是否损坏

3. **处理卡住不动**
   - 检查网络连接
   - 查看终端错误信息
   - 尝试重启GUI服务

4. **字幕质量不佳**
   - 确保视频音频清晰
   - 尝试启用术语处理
   - 调整设备配置

### 性能优化

1. **设备选择**
   - Mac M1/M2: 使用 `mps`
   - NVIDIA GPU: 使用 `cuda`
   - 其他: 使用 `cpu`

2. **内存优化**
   - 处理大文件时关闭其他应用
   - 适当降低重试次数

3. **网络优化**
   - 首次使用可能需要下载模型
   - 建议使用稳定的网络连接

## 📞 技术支持

如果遇到问题，请按以下顺序尝试：

1. **查看控制台日志**
   - GUI启动后查看终端输出
   - 寻找错误信息和警告

2. **检查系统要求**
   - Python 3.10+
   - 充足的磁盘空间
   - 稳定的网络连接

3. **重新安装依赖**
   ```bash
   pip install -e . --force-reinstall
   ```

4. **重置配置**
   ```bash
   rm -rf ~/.video_subtitle_cache
   ```

5. **提交Issue**
   - 描述问题现象
   - 附上错误日志
   - 说明系统环境

## 🔄 更新和维护

### 更新系统

```bash
# 拉取最新代码
git pull

# 更新依赖
pip install -e . --upgrade

# 重启GUI
video-subtitle gui
```

### 清理缓存

```bash
# 清理模型缓存
rm -rf ~/.video_subtitle_cache

# 清理临时文件
rm -rf /tmp/video_subtitle_*
```

---

📧 如需更多帮助，请查看项目README或提交Issue。 